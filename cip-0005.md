| cip  | title                  | author | status |      |
| ---- | ---------------------- | ------ | ------ | ---- |
| 0005 | sync模式执行逻辑的变更 |        | 草案   |      |

## 概述

本文描述了对sync模式执行逻辑的变更。

## 目的

发送交易的时候，在检查交易的签名与gas费是否足够的基础上，增加交易的基本执行逻辑是否能够成功的检查。

## 背景

在开发全节点的时候，用Golang写的Message Handler一般都比较复杂，包含着很多的检查，以便让那些不合法的Message失败掉。钱包开发者需要在他们的App中，用其他语言（javascript、java、swift等）再实现一遍这些检查逻辑，这样才能保证App所广播出来的交易最终可以成功执行，而不是在链上失败掉，白白浪费Gas费。这对于钱包开发者而言，是个不小的负担。

造成这一现状的原因，根本上在于Cosmos-SDK只对那些已经被打包进块的交易执行Message Handler，而在控制交易是否进Mempool的时候，只检查签名和基本的Gas费。目前，钱包普遍使用Sync模式，即一个交易能进入Mempool，就向用户反馈“执行成功”。如果在进Mempool的时候，就运行Message Handler来进行详尽的检查，即可避免掉白白浪费Gas费的情况，让钱包开发者不再需要做那么多的检查。

## 实现

增加一个配置选项，让全节点的可以控制CheckTx的行为，是只运行基本的签名和gas检查，还是额外执行Message Handler的逻辑。

这样，钱包运营者就可以在自己的后台运行打开这种配置选项的全节点，来帮助自己的App把关，让那种注定会在进块之后失败掉的交易，开始时就不要广播出来。